-- Database: vacinadb
 -- DROP DATABASE vacinadb;

CREATE TABLE PACIENTE(
	PACIENTE_ID SERIAL NOT NULL,
	TIPO_PACIENTE VARCHAR(50) NOT NULL,
	CONDICAO_ESPECIAL VARCHAR(50) NOT NULL,
	SENHA VARCHAR(30),
	PRIMARY kEY(PACIENTE_ID),
	NOME VARCHAR(50) NOT NULL,
	EMAIL VARCHAR(50) NOT NULL,
	CPF VARCHAR(50) NOT NULL,
	DATA_NASC DATE NOT NULL
)
	

CREATE TABLE PROFISSIONAL_SAUDE(
	PROFISSIONAL_SAUDE_ID SERIAL NOT NULL,
	ADM BOOLEAN NOT NULL,
	TIPO_PROFISSIONAL VARCHAR(50) NOT NULL,
	CRM VARCHAR(20) NOT NULL,
	SENHA VARCHAR(30),
	PRIMARY kEY(PROFISSIONAL_SAUDE_ID),
	NOME VARCHAR(50) NOT NULL,
	EMAIL VARCHAR(50) NOT NULL,
	CPF VARCHAR(50) NOT NULL,
	DATA_NASC DATE NOT NULL
)

CREATE TABLE LABORATORIO(
	LAB_ID SERIAL NOT NULL,
	NOME VARCHAR(50) NOT NULL,
	PRIMARY KEY(LAB_ID)
)

CREATE TABLE VACINA(
	VACINA_ID SERIAL NOT NULL,
	NOME_VACINA VARCHAR(30),
	LOTE DECIMAL(5,0),
	VALIDADE DATE NOT NULL,
	QUANTIDADE DECIMAL (5,0),
	PRIMARY KEY (VACINA_ID),
	LAB_ID SERIAL,
	CONSTRAINT FK_LAB_ID
	FOREIGN KEY (LAB_ID)
	REFERENCES LABORATORIO(LAB_ID)
)

CREATE TABLE REGISTRO_VACINACAO(
	REGISTRO_VAC_ID SERIAL NOT NULL,
	LOCAL VARCHAR(50) NOT NULL,
	DATA_VACINADO DATE NOT NULL,
	DATA_PROX_DOSE DATE NOT NULL,
	PRIMARY KEY (REGISTRO_VAC_ID),
	VACINA_ID SERIAL,
	PACIENTE_ID SERIAL,
	PROFISSIONAL_SAUDE_ID SERIAL,
	FOREIGN KEY (VACINA_ID) REFERENCES VACINA(VACINA_ID),
	FOREIGN KEY (PACIENTE_ID) REFERENCES PACIENTE(PACIENTE_ID),
	FOREIGN KEY (PROFISSIONAL_SAUDE_ID) REFERENCES PROFISSIONAL_SAUDE(PROFISSIONAL_SAUDE_ID)
)

